<ion-view view-title="골프 조인" class="bookingjoin">
	<!-- <ion-nav-bar class="bar-positive">
		<ion-nav-back-button></ion-nav-back-button>
		<ion-nav-title>
			<div class="page-title">골프 조인</div>
		</ion-nav-title>
		<ion-nav-buttons side="left">
			<button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
		</ion-nav-buttons>
		<ion-nav-buttons side="right">
			<button type="button" class="button button-clear" ng-click="openModal(3)">등록하기</button>
		</ion-nav-buttons>		
	</ion-nav-bar> -->
	
	<ion-nav-buttons side="right">
		<button type="button" class="button button-clear" ng-click="openModal(3)">등록하기</button>
	</ion-nav-buttons>

	<div class="bar bar-subheader">
		<!-- <a class="item item-avatar item-button-right item-text-wrap" href="#">
	      <img ng-src="{{me.profile.thumbnail_image | local_img}}" onerror="this.src='images/avatars/avatar-unknown.jpg'">
	      <h2>파트너가 누군지는 알고나 치자!</h2>
	      <button class="button button-small button-positive bookingjoin-button-posts" ng-click="openModal(4)">등록</button>
	    </a> -->
	 	<div class="row text-center stable-bg">
			<div class="col text-left" ng-click="bookingSort(1)">
				<div class="positive">골프장 <span ng-if="!b_sod || b_sst==2 || b_sst==3">▼</span><span ng-if="b_sst==1 && b_sod">▲</span></div>
			</div>
			<div class="col col-33 text-left" ng-click="bookingSort(2)">
				<div class="positive">예약일시 <span ng-if="!b_sod || b_sst==1 || b_sst==3">▼</span><span ng-if="b_sst==2 && b_sod">▲</span></div>
			</div>
			<div class="col col-25 text-right" ng-click="bookingSort(3)">
				<div class="positive">그린피 <span ng-if="!b_sod || b_sst==1 || b_sst==2">▼</span><span ng-if="b_sst==3 && b_sod">▲</span></div>
			</div>
		</div>
	</div>

	<ion-content class="has-subheader has-footer sponsor-wrap">

		<ion-refresher pulling-text="새로고침" on-refresh="doRefresh()"></ion-refresher>

		<div class="list" collection-repeat="list in lists">
			<div class="margin-bottom">
				<div class="item">
					<div class="row row-no-padding text-center">
						<div class="col text-left" style="overflow: hidden;">
							<div><strong class="dark"><a ng-click="openInAppBrowser(list.webpage)">{{list.golf_club_name}}</a></strong></div>
						</div>
						<div class="col col-33" ng-click="openModal(9, list)">
							<div class="font15 bold">{{list.golf_time | f_golfdate : list.golf_reserved}}</div>
						</div>
						<div class="col col-25 text-right booking-field-green-fee" ng-click="openModal(9, list)">
							<div class="bold"><span class="assertive">{{list.green_fee | numberformat}}</span></div>
						</div>
					</div>
					<div class="golflist-thumb margin-top">
						<img ng-src="{{list.thumbnail_image | local_img}}" onerror="this.src='images/avatars/avatar-unknown.jpg'" ng-click="onItemProfile(list)" ng-if="list.level != 6">

						<img ng-src="images/avatars/a.jpg" onerror="this.src='images/avatars/avatar-unknown.jpg'" ng-if="list.level == 6">

						<img ng-if="list.level != 6" ng-repeat="companion in (list.golf_companion | f_companion_count).sex track by $index" ng-src="images/avatars/{{companion}}.jpg" onerror="this.src='images/avatars/avatar-unknown.jpg'">

						<img ng-if="list.level == 6" ng-repeat="companion in (list.golf_companion | f_companion_booking_count).sex track by $index" ng-src="images/avatars/{{companion}}.jpg" onerror="this.src='images/avatars/avatar-unknown.jpg'">

						<div ng-repeat="rsvp in list.rsvp_list">
							<div>
								<div ng-if="rsvp.gender=='male'">
									<img ng-src="{{rsvp.thumbnail_image | local_img}}" onerror="this.src='images/avatars/avatar-unknown.jpg'" ng-click="onItemProfile(rsvp)">
									<span ng-if="((list.golf_partner | f_partner_count).cnt - list.rsvp_list.length) !=0 && list.golf_partner==8">
										<img ng-src="images/avatars/f.png" onerror="this.src='images/avatars/avatar-unknown.jpg'">
									</span>
								</div>
								<div ng-if="rsvp.gender=='female'">
									<img ng-src="{{rsvp.thumbnail_image | local_img}}" onerror="this.src='images/avatars/avatar-unknown.jpg'" ng-click="onItemProfile(rsvp)">
									<span ng-if="((list.golf_partner | f_partner_count).cnt - list.rsvp_list.length) !=0 && list.golf_partner==8">
										<img ng-src="images/avatars/m.png" onerror="this.src='images/avatars/avatar-unknown.jpg'">
									</span>
								</div>
							</div>
						</div>
						<div ng-repeat="partner in (list.golf_partner | f_partner_count).sex track by $index">
							<div>
								<div ng-if="(!list.rsvp_list.length && list.golf_partner==8) || list.golf_partner!=8">
									<div ng-if="((list.golf_partner | f_partner_count).cnt - list.rsvp_list.length) == 1 && $index < 1">
										<img ng-src="images/avatars/{{partner}}.png" onerror="this.src='images/avatars/avatar-unknown.jpg'">
									</div>
									<div ng-if="((list.golf_partner | f_partner_count).cnt - list.rsvp_list.length) == 2 && $index < 2">
										<img ng-src="images/avatars/{{partner}}.png" onerror="this.src='images/avatars/avatar-unknown.jpg'">
									</div>
									<div ng-if="((list.golf_partner | f_partner_count).cnt - list.rsvp_list.length) == 3">
										<img ng-src="images/avatars/{{partner}}.png" onerror="this.src='images/avatars/avatar-unknown.jpg'">
									</div>
								</div>
							</div>
						</div>
					</div>

					<div style="position: absolute; top:50px; right: 15px; width: auto; height: 34px" ng-click="openModal(9, list)">
						<span ng-if="list.golf_partner | f_partnerBooking">{{list.golf_partner | f_partnerBooking}}</span>
						<span ng-if="!(list.golf_partner | f_partnerBooking)">{{list.golf_partner | f_partner}}</span>
					</div>
					<i class="icon ion-arrow-right-a padding" style="position: absolute; bottom:10px; right: 30px;" ng-click="openModal(9, list)"></i>
					<!-- <button class="button button-small button-green padding-left padding-right" style="position: absolute; bottom:15px; right: 15px;" ng-if="list.status">확정</button> -->
				</div>
			</div>
		</div>

		<div class="list text-center padding" ng-if="lists.length < 1">
			<strong>골프 조인 리스트가 없습니다.</strong>
		</div>

		<ion-infinite-scroll icon="ion-loading-c" on-infinite="loadMores()" distance="5%" ng-if="!hasMoreData && lists.length > 19"></ion-infinite-scroll>

	</ion-content>

	<div class="bar bar-footer bar-stable bookingjoin-footer" ng-show="lists">
		<div class="row text-center font16">
			<div class="col">
				<button class="button button-block button-positive" ng-click="infoLink()">내글 보기</button>
			</div>
			<div class="col">
				<button class="button button-block button-green" ng-click="openModal(3)">등록하기</button>
			</div>
		</div>
	</div>

</ion-view>